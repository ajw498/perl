<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>perltodo - Perl TO-DO List</title>
<link rev="made" href="mailto:root@localhost" />
</head>

<body style="background-color: white">
<table border="0" width="100%" cellspacing="0" cellpadding="3">
<tr><td class="block" style="background-color: #cccccc" valign="middle">
<big><strong><span class="block">&nbsp;perltodo - Perl TO-DO List</span></strong></big>
</td></tr>
</table>

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#assertions">assertions</a></li>
	<li><a href="#icow">iCOW</a></li>
	<li><a href="#________closures_in_regexps">(?{...}) closures in regexps</a></li>
	<li><a href="#a_reentrant_regexp_engine">A re-entrant regexp engine</a></li>
	<li><a href="#pragmata">pragmata</a></li>
	<ul>

		<li><a href="#lexical_pragmas">lexical pragmas</a></li>
		<li><a href="#use_less__memory_">use less 'memory'</a></li>
	</ul>

	<li><a href="#prototypes_and_functions">prototypes and functions</a></li>
	<ul>

		<li><a href="#__prototype_character">_ prototype character</a></li>
		<li><a href="#inlining_autoloaded_constants">inlining autoloaded constants</a></li>
		<li><a href="#finish_off_lvalue_functions">Finish off lvalue functions</a></li>
	</ul>

	<li><a href="#unicode_and_utf8">Unicode and UTF8</a></li>
	<ul>

		<li><a href="#implicit_latin_1____unicode_translation">Implicit Latin 1 =&gt; Unicode translation</a></li>
		<li><a href="#utf8_caching_code">UTF8 caching code</a></li>
		<li><a href="#unicode_in_filenames">Unicode in Filenames</a></li>
		<li><a href="#unicode_in__env">Unicode in %ENV</a></li>
	</ul>

	<li><a href="#regexps">Regexps</a></li>
	<ul>

		<li><a href="#regexp_optimiser_optional">regexp optimiser optional</a></li>
		<li><a href="#common_suffices_prefices_in_regexps__trie_optimization_">common suffices/prefices in regexps (trie optimization)</a></li>
	</ul>

	<li><a href="#pod">POD</a></li>
	<ul>

		<li><a href="#pod___html_conversion_still_sucks">POD -&gt; HTML conversion still sucks</a></li>
	</ul>

	<li><a href="#misc_medium_sized_projects">Misc medium sized projects</a></li>
	<ul>

		<li><a href="#unitcheck">UNITCHECK</a></li>
		<li><a href="#optional_optimizer">optional optimizer</a></li>
		<li><a href="#you_want__how__many">You WANT *how* many</a></li>
		<li><a href="#lexical_aliases">lexical aliases</a></li>
		<li><a href="#no_6">no 6</a></li>
		<li><a href="#ipv6">IPv6</a></li>
		<li><a href="#entersub_xs_vs_perl">entersub XS vs Perl</a></li>
		<li><a href="#_inc_source_filter_to_filter__simple">@INC source filter to Filter::Simple</a></li>
		<li><a href="#bincompat_functions">bincompat functions</a></li>
		<li><a href="#use_fchown_fchmod_internally">Use fchown/fchmod internally</a></li>
	</ul>

	<li><a href="#tests">Tests</a></li>
	<ul>

		<li><a href="#make_schwern_poorer">Make Schwern poorer</a></li>
		<li><a href="#test_b">test B</a></li>
		<li><a href="#improve_tests_for_config_pm">Improve tests for Config.pm</a></li>
		<li><a href="#common_test_code_for_timed_bailout">common test code for timed bailout</a></li>
	</ul>

	<li><a href="#installation">Installation</a></li>
	<ul>

		<li><a href="#compressed_man_pages">compressed man pages</a></li>
		<li><a href="#make_config_pm_cope_with_differences_between_build_and_installed_perl">Make Config.pm cope with differences between build and installed perl</a></li>
		<li><a href="#relocatable_perl">Relocatable perl</a></li>
		<li><a href="#make_html_install_work">make HTML install work</a></li>
		<li><a href="#put_patchlevel_in_v">put patchlevel in -v</a></li>
	</ul>

	<li><a href="#incremental_things">Incremental things</a></li>
	<ul>

		<li><a href="#autovivification">autovivification</a></li>
		<li><a href="#fix_tainting_bugs">fix tainting bugs</a></li>
		<li><a href="#make_tainting_consistent">Make tainting consistent</a></li>
		<li><a href="#dual_life_everything">Dual life everything</a></li>
	</ul>

	<li><a href="#vague_things">Vague things</a></li>
	<ul>

		<li><a href="#threads">threads</a></li>
		<li><a href="#posix_memory_footprint">POSIX memory footprint</a></li>
		<li><a href="#optimize_away___">Optimize away @_</a></li>
		<li><a href="#switch_ops">switch ops</a></li>
		<li><a href="#attach_detach_debugger_from_running_program">Attach/detach debugger from running program</a></li>
		<li><a href="#a_decent_benchmark">A decent benchmark</a></li>
		<li><a href="#readpipe_list_"><code>readpipe(LIST)</code></a></li>
	</ul>

</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>perltodo - Perl TO-DO List</p>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>This is a list of wishes for Perl.  Send updates to
<em><a href="mailto:perl5-porters@perl.org">perl5-porters@perl.org</a></em>.  If you want to work on any of these
projects, be sure to check the perl5-porters archives for past ideas,
flames, and propaganda.  This will save you time and also prevent you
from implementing something that Larry has already vetoed.  One set
of archives may be found at:</p>
<pre>
    <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/">http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/</a></pre>
<p>
</p>
<hr />
<h1><a name="assertions">assertions</a></h1>
<p>Clean up and finish support for assertions. See <a href="#assertions">the assertions manpage</a>.</p>
<p>
</p>
<hr />
<h1><a name="icow">iCOW</a></h1>
<p>Sarathy and Arthur have a proposal for an improved Copy On Write which
specifically will be able to COW new ithreads. If this can be implemented
it would be a good thing.</p>
<p>
</p>
<hr />
<h1><a name="________closures_in_regexps">(?{...}) closures in regexps</a></h1>
<p>Fix (or rewrite) the implementation of the <code>/(?{...})/</code> closures.</p>
<p>
</p>
<hr />
<h1><a name="a_reentrant_regexp_engine">A re-entrant regexp engine</a></h1>
<p>This will allow the use of a regex from inside (?{ }), (??{ }) and
(?(?{ })|) constructs.</p>
<p>
</p>
<hr />
<h1><a name="pragmata">pragmata</a></h1>
<p>
</p>
<h2><a name="lexical_pragmas">lexical pragmas</a></h2>
<p>Reimplement the mechanism of lexical pragmas to be more extensible. Fix
current pragmas that don't work well (or at all) with lexical scopes or in
run-time <code>eval(STRING)</code> (<code>sort</code>, <code>re</code>, <code>encoding</code> for example). MJD has a
preliminary patch that implements this.</p>
<p>
</p>
<h2><a name="use_less__memory_">use less 'memory'</a></h2>
<p>Investigate trade offs to switch out perl's choices on memory usage.
Particularly perl should be able to give memory back.</p>
<p>
</p>
<hr />
<h1><a name="prototypes_and_functions">prototypes and functions</a></h1>
<p>
</p>
<h2><a name="__prototype_character">_ prototype character</a></h2>
<p>Study the possibility of adding a new prototype character, <code>_</code>, meaning
``this argument defaults to $_''.</p>
<p>
</p>
<h2><a name="inlining_autoloaded_constants">inlining autoloaded constants</a></h2>
<p>Currently the optimiser can inline constants when expressed as subroutines
with prototype ($) that return a constant. Likewise, many packages wrapping
C libraries export lots of constants as subroutines which are AUTOLOADed on
demand. However, these have no prototypes, so can't be seen as constants by
the optimiser. Some way of cheaply (low syntax, low memory overhead) to the
perl compiler that a name is a constant would be great, so that it knows to
call the AUTOLOAD routine at compile time, and then inline the constant.</p>
<p>
</p>
<h2><a name="finish_off_lvalue_functions">Finish off lvalue functions</a></h2>
<p>The old perltodo notes ``They don't work in the debugger, and they don't work for
list or hash slices.''</p>
<p>
</p>
<hr />
<h1><a name="unicode_and_utf8">Unicode and UTF8</a></h1>
<p>
</p>
<h2><a name="implicit_latin_1____unicode_translation">Implicit Latin 1 =&gt; Unicode translation</a></h2>
<p>Conversions from byte strings to UTF-8 currently map high bit characters
to Unicode without translation (or, depending on how you look at it, by
implicitly assuming that the byte strings are in Latin-1). As perl assumes
the C locale by default, upgrading a string to UTF-8 may change the
meaning of its contents regarding character classes, case mapping, etc.
This should probably emit a warning (at least).</p>
<p>
</p>
<h2><a name="utf8_caching_code">UTF8 caching code</a></h2>
<p>The string position/offset cache is not optional. It should be.</p>
<p>
</p>
<h2><a name="unicode_in_filenames">Unicode in Filenames</a></h2>
<p>chdir, chmod, chown, chroot, exec, glob, link, lstat, mkdir, open,
opendir, qx, readdir, readlink, rename, rmdir, stat, symlink, sysopen,
system, truncate, unlink, utime, -X.  All these could potentially accept
Unicode filenames either as input or output (and in the case of system
and qx Unicode in general, as input or output to/from the shell).
Whether a filesystem - an operating system pair understands Unicode in
filenames varies.</p>
<p>Known combinations that have some level of understanding include
Microsoft NTFS, Apple HFS+ (In Mac OS 9 and X) and Apple UFS (in Mac
OS X), NFS v4 is rumored to be Unicode, and of course Plan 9.  How to
create Unicode filenames, what forms of Unicode are accepted and used
(UCS-2, UTF-16, UTF-8), what (if any) is the normalization form used,
and so on, varies.  Finding the right level of interfacing to Perl
requires some thought.  Remember that an OS does not implicate a
filesystem.</p>
<p>(The Windows -C command flag ``wide API support'' has been at least
temporarily retired in 5.8.1, and the -C has been repurposed, see
<a href="perlrun.html">the perlrun manpage</a>.)</p>
<p>
</p>
<h2><a name="unicode_in__env">Unicode in %ENV</a></h2>
<p>Currently the %ENV entries are always byte strings.</p>
<p>
</p>
<hr />
<h1><a name="regexps">Regexps</a></h1>
<p>
</p>
<h2><a name="regexp_optimiser_optional">regexp optimiser optional</a></h2>
<p>The regexp optimiser is not optional. It should configurable to be, to allow
its performance to be measured, and its bugs to be easily demonstrated.</p>
<p>
</p>
<h2><a name="common_suffices_prefices_in_regexps__trie_optimization_">common suffices/prefices in regexps (trie optimization)</a></h2>
<p>Currently, the user has to optimize <code>foo|far</code> and <code>foo|goo</code> into
<code>f(?:oo|ar)</code> and <code>[fg]oo</code> by hand; this could be done automatically.</p>
<p>
</p>
<hr />
<h1><a name="pod">POD</a></h1>
<p>
</p>
<h2><a name="pod___html_conversion_still_sucks">POD -&gt; HTML conversion still sucks</a></h2>
<p>Which is crazy given just how simple POD purports to be, and how simple HTML
can be.</p>
<p>
</p>
<hr />
<h1><a name="misc_medium_sized_projects">Misc medium sized projects</a></h1>
<p>
</p>
<h2><a name="unitcheck">UNITCHECK</a></h2>
<p>Introduce a new special block, UNITCHECK, which is run at the end of a
compilation unit (module, file, <code>eval(STRING)</code> block). This will correspond to
the Perl 6 CHECK. Perl 5's CHECK cannot be changed or removed because the
O.pm/B.pm backend framework depends on it.</p>
<p>
</p>
<h2><a name="optional_optimizer">optional optimizer</a></h2>
<p>Make the peephole optimizer optional.</p>
<p>
</p>
<h2><a name="you_want__how__many">You WANT *how* many</a></h2>
<p>Currently contexts are void, scalar and list. split has a special mechanism in
place to pass in the number of return values wanted. It would be useful to
have a general mechanism for this, backwards compatible and little speed hit.
This would allow proposals such as short circuiting sort to be implemented
as a module on CPAN.</p>
<p>
</p>
<h2><a name="lexical_aliases">lexical aliases</a></h2>
<p>Allow lexical aliases (maybe via the syntax <code>my \$alias = \$foo</code>.</p>
<p>
</p>
<h2><a name="no_6">no 6</a></h2>
<p>Make <code>no 6</code> and <code>no v6</code> work (opposite of <code>use 5.005</code>, etc.).</p>
<p>
</p>
<h2><a name="ipv6">IPv6</a></h2>
<p>Clean this up. Check everything in core works</p>
<p>
</p>
<h2><a name="entersub_xs_vs_perl">entersub XS vs Perl</a></h2>
<p>At the moment pp_entersub is huge, and has code to deal with entering both
perl and and XS subroutines. Subroutine implementations rarely change between 
perl and XS at run time, so investigate using 2 ops to enter subs (one for
XS, one for perl) and swap between if a sub is redefined.</p>
<p>
</p>
<h2><a name="_inc_source_filter_to_filter__simple">@INC source filter to Filter::Simple</a></h2>
<p>The second return value from a sub in @INC can be a source filter. This isn't
documented. It should be changed to use Filter::Simple, tested and documented.</p>
<p>
</p>
<h2><a name="bincompat_functions">bincompat functions</a></h2>
<p>There are lots of functions which are retained for binary compatibility.
Clean these up. Move them to mathom.c, and don't compile for blead?</p>
<p>
</p>
<h2><a name="use_fchown_fchmod_internally">Use fchown/fchmod internally</a></h2>
<p>The old perltodo notes ``This has been done in places, but needs a thorough
code review. Also fchdir is available in some platforms.''</p>
<p>
</p>
<hr />
<h1><a name="tests">Tests</a></h1>
<p>
</p>
<h2><a name="make_schwern_poorer">Make Schwern poorer</a></h2>
<p>Tests for everything, At which point Schwern coughs up $500 to TPF.</p>
<p>
</p>
<h2><a name="test_b">test B</a></h2>
<p>A test suite for the B module would be nice.</p>
<p>
</p>
<h2><a name="improve_tests_for_config_pm">Improve tests for Config.pm</a></h2>
<p>Config.pm doesn't appear to be well tested.</p>
<p>
</p>
<h2><a name="common_test_code_for_timed_bailout">common test code for timed bailout</a></h2>
<p>Write portable self destruct code for tests to stop them burning CPU in
infinite loops. Needs to avoid using alarm, as some of the tests are testing
alarm/sleep or timers.</p>
<p>
</p>
<hr />
<h1><a name="installation">Installation</a></h1>
<p>
</p>
<h2><a name="compressed_man_pages">compressed man pages</a></h2>
<p>Be able to install them</p>
<p>
</p>
<h2><a name="make_config_pm_cope_with_differences_between_build_and_installed_perl">Make Config.pm cope with differences between build and installed perl</a></h2>
<p>
</p>
<h2><a name="relocatable_perl">Relocatable perl</a></h2>
<p>Make it possible to create a relocatable perl binary. Will need some collusion
with Config.pm. We could use a syntax of ... for location of current binary?</p>
<p>
</p>
<h2><a name="make_html_install_work">make HTML install work</a></h2>
<p>
</p>
<h2><a name="put_patchlevel_in_v">put patchlevel in -v</a></h2>
<p>Currently perl from p4/rsync ships with a patchlevel.h file that usually
defines one local patch, of the form ``MAINT12345'' or ``RC1''. The output of
perl -v doesn't report that a perl isn't an official release, and this
information can get lost in bugs reports. Because of this, the minor version
isn't bumped up until RC time, to minimise the possibility of versions of perl
escaping that believe themselves to be newer than they actually are.</p>
<p>It would be useful to find an elegant way to have the ``this is an interim
maintenance release'' or ``this is a release candidate'' in the terse -v output,
and have it so that it's easy for the pumpking to remove this just as the
release tarball is rolled up. This way the version pulled out of rsync would
always say ``I'm a development release'' and it would be safe to bump the
reported minor version as soon as a release ships, which would aid perl
developers.</p>
<p>
</p>
<hr />
<h1><a name="incremental_things">Incremental things</a></h1>
<p>Some tasks that don't need to get done in one big hit.</p>
<p>
</p>
<h2><a name="autovivification">autovivification</a></h2>
<p>Make all autovivification consistent w.r.t LVALUE/RVALUE and strict/no strict;</p>
<p>
</p>
<h2><a name="fix_tainting_bugs">fix tainting bugs</a></h2>
<p>Fix the bugs revealed by running the test suite with the <code>-t</code> switch (via
<code>make test.taintwarn</code>).</p>
<p>
</p>
<h2><a name="make_tainting_consistent">Make tainting consistent</a></h2>
<p>Tainting would be easier to use if it didn't take documented shortcuts and allow
taint to ``leak'' everywhere within an expression.</p>
<p>
</p>
<h2><a name="dual_life_everything">Dual life everything</a></h2>
<p>As part of the ``dists'' plan, anything that doesn't belong in the smallest perl
distribution needs to be dual lifed. Anything else can be too.</p>
<p>
</p>
<hr />
<h1><a name="vague_things">Vague things</a></h1>
<p>Some more nebulous ideas</p>
<p>
</p>
<h2><a name="threads">threads</a></h2>
<p>Make threads more robust.</p>
<p>
</p>
<h2><a name="posix_memory_footprint">POSIX memory footprint</a></h2>
<p>Ilya observed that use POSIX; eats memory like there's no tomorrow, and at
various times worked to cut it down. There is probably still fat to cut out -
for example POSIX passes Exporter some very memory hungry data structures.</p>
<p>
</p>
<h2><a name="optimize_away___">Optimize away @_</a></h2>
<p>The old perltodo notes ``Look at the ''reification`` code in <code>av.c</code>''.</p>
<p>
</p>
<h2><a name="switch_ops">switch ops</a></h2>
<p>The old perltodo notes ``Although we have <code>Switch.pm</code> in core, Larry points to
the dormant <code>nswitch</code> and <code>cswitch</code> ops in <em>pp.c</em>; using these opcodes would
be much faster.''</p>
<p>
</p>
<h2><a name="attach_detach_debugger_from_running_program">Attach/detach debugger from running program</a></h2>
<p>The old perltodo notes ``With <code>gdb</code>, you can attach the debugger to a running
program if you pass the process ID. It would be good to do this with the Perl
debugger on a running Perl program, although I'm not sure how it would be done.''
ssh and screen do this with named pipes in tmp. Maybe we can too.</p>
<p>
</p>
<h2><a name="a_decent_benchmark">A decent benchmark</a></h2>
<p>perlbench seems impervious to any recent changes made to the perl core. It would
be useful to have a reasonable general benchmarking suite that roughly
represented what current perl programs do, and measurably reported whether
tweaks to the core improve, degrade or don't really affect performance, to
guide people attempting to optimise the guts of perl.</p>
<p>
</p>
<h2><a name="readpipe_list_"><code>readpipe(LIST)</code></a></h2>
<p><code>system()</code> accepts a LIST syntax (and a PROGRAM LIST syntax) to avoid
running a shell. <code>readpipe()</code> (the function behind qx//) could be similarly
extended.</p>
<table border="0" width="100%" cellspacing="0" cellpadding="3">
<tr><td class="block" style="background-color: #cccccc" valign="middle">
<big><strong><span class="block">&nbsp;perltodo - Perl TO-DO List</span></strong></big>
</td></tr>
</table>

</body>

</html>
