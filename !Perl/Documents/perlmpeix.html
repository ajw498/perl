<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>README.mpeix - Perl/iX for HP e3000 MPE</title>
<link rev="made" href="mailto:root@localhost" />
</head>

<body style="background-color: white">
<table border="0" width="100%" cellspacing="0" cellpadding="3">
<tr><td class="block" style="background-color: #cccccc" valign="middle">
<big><strong><span class="block">&nbsp;README.mpeix - Perl/iX for HP e3000 MPE</span></strong></big>
</td></tr>
</table>

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#note">NOTE</a></li>
	<li><a href="#binary_distribution_from_hp">Binary distribution from HP</a></li>
	<li><a href="#what_s_new_in_perl_for_mpe_ix">What's New in Perl for MPE/iX</a></li>
	<li><a href="#welcome_to_perl_ix">Welcome to Perl/iX</a></li>
	<li><a href="#system_requirements_for_perl_ix">System Requirements for Perl/iX</a></li>
	<li><a href="#how_to_obtain_perl_ix">How to Obtain Perl/iX</a></li>
	<li><a href="#perl_ix_distribution_contents_highlights">Perl/iX Distribution Contents Highlights</a></li>
	<li><a href="#how_to_compile_perl_ix">How to Compile Perl/iX</a></li>
	<li><a href="#getting_started_with_perl_ix">Getting Started with Perl/iX</a></li>
	<li><a href="#mpe_ix_implementation_considerations">MPE/iX Implementation Considerations</a></li>
	<li><a href="#known_perl_ix_bugs_under_investigation">Known Perl/iX Bugs Under Investigation</a></li>
	<li><a href="#perl_ix_todo_list">Perl/iX To-Do List</a></li>
	<li><a href="#perl_ix_change_history">Perl/iX Change History</a></li>
	<li><a href="#author">AUTHOR</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>README.mpeix - Perl/iX for HP e3000 MPE</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<pre>
   <a href="http://www.bixby.org/mark/perlix.html">http://www.bixby.org/mark/perlix.html</a>
   <a href="http://jazz.external.hp.com/src/hp_freeware/perl/">http://jazz.external.hp.com/src/hp_freeware/perl/</a>
   Perl language for MPE
   Last updated July 29, 2003 @ 2100 UTC</pre>
<p>
</p>
<hr />
<h1><a name="note">NOTE</a></h1>
<p>This is a podified version of the above-mentioned web page,
podified by Jarkko Hietaniemi 2001-Jan-01.</p>
<p>
</p>
<hr />
<h1><a name="binary_distribution_from_hp">Binary distribution from HP</a></h1>
<p>The simplest way to obtain Perl for the MPE/iX is to go either of
these URLs and follow the instructions within.</p>
<p><a href="http://jazz.external.hp.com/src/hp_freeware/perl/">http://jazz.external.hp.com/src/hp_freeware/perl/</a>
<a href="http://www.bixby.org/mark/perlix.html">http://www.bixby.org/mark/perlix.html</a></p>
<p>Use which ever one is more recent.</p>
<p>
</p>
<hr />
<h1><a name="what_s_new_in_perl_for_mpe_ix">What's New in Perl for MPE/iX</a></h1>
<p>June 1, 2000</p>
<ul>
<li></li>
Rebuilt to be compatible with mod_perl.  If you plan on using
mod_perl, you MUST download and install this version of Perl/iX!
<p></p>
<li></li>
uselargefiles=``undef'': not available in MPE for POSIX files yet.
<p></p>
<li></li>
Now bundled with various add-on packages:
<ul>
<li></li>
libnet (as seen on CPAN)
<p></p>
<li></li>
libwww-perl (LWP) which lets Perl programs behave like web browsers:
<pre>
    1. #!/PERL/PUB/perl
    2. use LWP::Simple;
    3. $doc = get('<a href="http://www.bixby.org/mark/perlix.html">http://www.bixby.org/mark/perlix.html</a>');  # reads the
       web page into variable $doc</pre>
<p>(http://www.bixby.org/mark/perlix.html)</p>
<p></p>
<li></li>
mod_perl (just the perl portion; the actual DSO will be released
soon with Apache/iX 1.3.12 from bixby.org).  This module allows you to
write high performance persistent Perl CGI scripts and all sorts of
cool things. (http://perl.apache.org/)
<p>and much much more hiding under /PERL/PUB/.cpan/</p>
<p></p>
<li></li>
The CPAN module now works for automatic downloading and
installing of add-on packages:
<pre>
    1. export FTP_PASSIVE=1
    2. perl -MCPAN -e shell
    3. Ignore any terminal I/O related complaints!</pre>
<p>(http://theoryx5.uwinnipeg.ca/CPAN/data/perl/CPAN.html)</p>
<p></p></ul>
</ul>
<p>May 20, 2000</p>
<ul>
<li></li>
Updated to version 5.6.0.  Builds straight out of the box on MPE/iX.
<p></p>
<li></li>
Perl's <code>getpwnam()</code> function which had regressed to being
unimplemented on MPE is now implemented once again.
<p></p></ul>
<p>September 17, 1999</p>
<ul>
<li></li>
Migrated from cccd.edu to bixby.org.
<p></p></ul>
<p>
</p>
<hr />
<h1><a name="welcome_to_perl_ix">Welcome to Perl/iX</a></h1>
<p>This is the official home page for the HP e3000 MPE/iX
( <a href="http://www.hp.com/go/e3000">http://www.hp.com/go/e3000</a> ) port of the Perl scripting
language ( <a href="http://www.perl.com/">http://www.perl.com/</a> ) which gives you all of the power of C,
awk, sed, and sh in a single language. Check here for the latest news,
implemented functionality, known bugs, to-do list, etc. Status reports
about major milestones will also be posted to the HP3000-L mailing list
( <a href="http://www.lsoft.com/scripts/wl.exe?SL1=HP3000-L&H=RAVEN.UTC.EDU">http://www.lsoft.com/scripts/wl.exe?SL1=HP3000-L&H=RAVEN.UTC.EDU</a> ) and
its associated gatewayed newsgroup comp.sys.hp.mpe.</p>
<p>I'm doing this port because I can't live without Perl on the Unix
machines that I administer, and I want to have the same power
available to me on MPE.</p>
<p>Please send your comments, questions, and bug reports directly to me,
Mark Bixby ( <a href="http://www.bixby.org/mark/">http://www.bixby.org/mark/</a> ). Or just post them to HP3000-L.</p>
<p>The platform I'm using to do this port is an HP 3000 957RX running
MPE/iX 6.0 and using the GNU gcc C compiler
( <a href="http://jazz.external.hp.com/src/gnu/gnuframe.html">http://jazz.external.hp.com/src/gnu/gnuframe.html</a> ).</p>
<p>The combined porting wisdom from all of my ports can be found in my
MPE/iX Porting Guide (http://www.bixby.org/mark/porting.html).</p>
<p>IMPORTANT NOTICE: Yes, I do work for the HP CSY R&amp;D lab, but ALL of
the software you download from bixby.org is my personal freeware that
is NOT supported by HP.</p>
<p>
</p>
<hr />
<h1><a name="system_requirements_for_perl_ix">System Requirements for Perl/iX</a></h1>
<ul>
<li></li>
MPE/iX 5.5 or later. This version of Perl/iX does NOT run on
MPE/iX 5.0 or earlier, nor does it run on ``classic'' MPE/V machines.
<p></p>
<li></li>
If you wish to recompile Perl, you must install both GNUCORE and
GNUGCC from jazz (http://jazz.external.hp.com/src/gnu/gnuframe.html).
<p></p>
<li></li>
Perl/iX will be happier on MPE/iX 5.5 if you install the MPEKX40B
extended POSIX filename characters patch, but this is optional.
<p></p>
<li></li>
Patch LBCJXT6A is required on MPE/iX 5.5 machines in order to
prevent Perl/iX from dying with an unresolved external reference
to _getenv_libc.
<p></p>
<li></li>
If you will be compiling Perl/iX yourself, you will also need
Syslog/iX ( <a href="http://www.bixby.org/mark/syslogix.html">http://www.bixby.org/mark/syslogix.html</a> ) and the
/BIND/PUB/include and /BIND/PUB/lib portions of BIND/iX
( <a href="http://www.bixby.org/mark/bindix.html">http://www.bixby.org/mark/bindix.html</a> ).
<p></p></ul>
<p>
</p>
<hr />
<h1><a name="how_to_obtain_perl_ix">How to Obtain Perl/iX</a></h1>
<ol>
<li></li>
Download Perl using either FTP.ARPA.SYS or some other client
<p></p>
<li></li>
Extract the installation script
<p></p>
<li></li>
Edit the installation script
<p></p>
<li></li>
Run the installation script
<p></p>
<li></li>
Convert your *.a system archive libraries to *.sl shared libraries
<p></p></ol>
<p>Download Perl using FTP.ARPA.SYS from your HP 3000 (the preferred
method).....</p>
<pre>
    :HELLO MANAGER.SYS
    :XEQ FTP.ARPA.SYS
    open ftp.bixby.org
    anonymous
    your@email.address
    bytestream
    cd /pub/mpe
    get perl-5.6.0-mpe.tar.Z /tmp/perl.tar.Z;disc=2147483647
    exit</pre>
<p>.....Or download using some other generic web or ftp client (the alternate
method)</p>
<p>Download the following files (make sure that you use ``binary mode'' or
whatever client feature that is 8-bit clean):</p>
<ul>
<li></li>
Perl from
<pre>
    <a href="http://www.bixby.org/ftp/pub/mpe/perl-5.6.0-mpe.tar.Z">http://www.bixby.org/ftp/pub/mpe/perl-5.6.0-mpe.tar.Z</a></pre>
<p>or</p>
<pre>
    <a href="ftp://ftp.bixby.org/pub/mpe/perl-5.6.0-mpe.tar.Z">ftp://ftp.bixby.org/pub/mpe/perl-5.6.0-mpe.tar.Z</a></pre>
<p></p>
<li></li>
Upload those files to your HP 3000 in an 8-bit clean bytestream manner to:
<pre>
    /tmp/perl.tar.Z</pre>
<p></p>
<li></li>
Then extract the installation script (after both download methods)
<pre>
    :CHDIR /tmp
    :XEQ TAR.HPBIN.SYS 'xvfopz /tmp/perl.tar.Z INSTALL'</pre>
<p></p>
<li></li>
Edit the installation script
<p>Examine the accounting structure creation commands and modify if
necessary (adding additional capabilities, choosing a non-system
volume set, etc).</p>
<pre>
    :XEQ VI.HPBIN.SYS /tmp/INSTALL</pre>
<p></p>
<li></li>
Run the installation script.
<p>The accounting structure will be created and then all files will be
extracted from the archive.</p>
<pre>
    :XEQ SH.HPBIN.SYS /tmp/INSTALL</pre>
<p></p>
<li></li>
Convert your *.a system archive libraries to *.sl shared libraries
<p>You only have to do this ONCE on your MPE/iX 5.5 machine in order to
convert /lib/lib*.a and /usr/lib/lib*.a libraries to their *.sl
equivalents.  This step should not be necessary on MPE/iX 6.0 or later
machines because the 6.0 or later update process does it for you.</p>
<pre>
    :XEQ SH.HPBIN.SYS /PERL/PUB/LIBSHP3K</pre>
<p></p></ul>
<p>
</p>
<hr />
<h1><a name="perl_ix_distribution_contents_highlights">Perl/iX Distribution Contents Highlights</a></h1>
<dl>
<dt><strong><a name="item_readme">README</a></strong><br />
</dt>
<dd>
The file you're reading now.
</dd>
<p></p>
<dt><strong><a name="item_install">INSTALL</a></strong><br />
</dt>
<dd>
Perl/iX Installation script.
</dd>
<p></p>
<dt><strong><a name="item_libshp3k">LIBSHP3K</a></strong><br />
</dt>
<dd>
Script to convert *.a system archive libraries to *.sl shared libraries.
</dd>
<p></p>
<dt><strong><a name="item_perl">PERL</a></strong><br />
</dt>
<dd>
Perl NMPRG executable.  A version-numbered backup copy also
exists.  You might wish to ``ln -s /PERL/PUB/PERL /usr/local/bin/perl''.
</dd>
<p></p>
<dt><strong><a name="item__2ecpan_2f">.cpan/</a></strong><br />
</dt>
<dd>
Much add-on source code downloaded with the CPAN module.
</dd>
<p></p>
<dt><strong><a name="item_lib_2f">lib/</a></strong><br />
</dt>
<dd>
Perl libraries, both core and add-on.
</dd>
<p></p>
<dt><strong><a name="item_man_2f">man/</a></strong><br />
</dt>
<dd>
Perl man page documentation.
</dd>
<p></p>
<dt><strong><a name="item_public_html_2ffeedback_2ecgi">public_html/feedback.cgi</a></strong><br />
</dt>
<dd>
Sample feedback CGI form written in Perl.
</dd>
<p></p>
<dt><strong><a name="item_src_2fperl_2d5_2e6_2e0_2dmpe">src/perl-5.6.0-mpe</a></strong><br />
</dt>
<dd>
Source code.
</dd>
<p></p></dl>
<p>
</p>
<hr />
<h1><a name="how_to_compile_perl_ix">How to Compile Perl/iX</a></h1>
<ol>
<li></li>
cd src/perl-5.6.0-mpe
<p></p>
<li></li>
Read the INSTALL file for the official instructions
<p></p>
<li></li>
./Configure -d
<p></p>
<li></li>
make
<p></p>
<li></li>
./mpeix/relink
<p></p>
<li></li>
make test (expect approximately 15 out of 11306 subtests to fail,
mostly due to MPE not supporting hard links, UDP socket problems,
and handling <code>exit()</code> return codes improperly)
<p></p>
<li></li>
make install
<p></p>
<li></li>
Optionally create symbolic links that point to the Perl
executable, i.e. ln -s /PERL/PUB/PERL /usr/local/bin/perl
<p></p></ol>
<p>The summary test results from ``cd t; ./perl -I../lib harness'':</p>
<pre>
  Failed Test  Status Wstat Total Fail  Failed  List of failed
  ---------------------------------------------------------------------------
  io/fs.t                      29    8  27.59%  2-5, 7-9, 11
  io/openpid.t                 10    1  10.00%  7
  lib/io_sock.t                14    1   7.14%  13
  lib/io_udp.t                  7    2  28.57%  3, 5
  lib/posix.t                  27    1   3.70%  12
  op/lex_assign.t             187    1   0.53%  13
  op/stat.t                    58    1   1.72%  3
  15 tests and 94 subtests skipped.
  Failed 7/236 test scripts, 97.03% okay. 15/11306 subtests failed, 99.87% okay.</pre>
<p>
</p>
<hr />
<h1><a name="getting_started_with_perl_ix">Getting Started with Perl/iX</a></h1>
<p>Create your Perl script files with ``#!/PERL/PUB/perl'' (or an
equivalent symbolic link) as the first line.  Use the chmod command to
make sure that your script has execute permission. Run your script!</p>
<p>Be sure to take a look at the CPAN module list
( <a href="http://www.cpan.org/CPAN.html">http://www.cpan.org/CPAN.html</a> ). A wide variety of free Perl software
is available.  You can automatically download these packages by using
the CPAN module ( <a href="http://theoryx5.uwinnipeg.ca/CPAN/data/perl/CPAN.html">http://theoryx5.uwinnipeg.ca/CPAN/data/perl/CPAN.html</a> ).</p>
<p>
</p>
<hr />
<h1><a name="mpe_ix_implementation_considerations">MPE/iX Implementation Considerations</a></h1>
<p>There some minor functionality issues to be aware of when comparing
Perl for Unix (Perl/UX) to Perl/iX:</p>
<ul>
<li></li>
MPE gcc/ld doesn't properly support linking NMPRG executables against
NMXL dynamic libraries, so you must manually run mpeix/relink after
each re-build of Perl.
<p></p>
<li></li>
Perl/iX File::Copy will use MPE's /bin/cp command to copy files by
name in order to preserve file attributes like file code.
<p></p>
<li></li>
MPE (and thus Perl/iX) lacks support for setgrent(), endgrent(),
setpwent(), endpwent().
<p></p>
<li></li>
MPE (and thus Perl/iX) lacks support for hard links.
<p></p>
<li></li>
MPE requires <code>GETPRIVMODE()</code> in order to <code>bind()</code> to ports less than 1024.
Perl/iX will call <code>GETPRIVMODE()</code> automatically on your behalf if you
attempt to <code>bind()</code> to these low-numbered ports.  Note that the Perl/iX
executable and the PERL account do not normally have CAP=PM, so if you
will be bind()-ing to these privileged ports, you will manually need
to add PM capability as appropriate.
<p></p>
<li></li>
MPE requires that you <code>bind()</code> to an IP address of zero.  Perl/iX
automatically replaces the IP address that you pass to <code>bind()</code> with
a zero.
<p></p>
<li></li>
MPE requires <code>GETPRIVMODE()</code> in order to setuid().  There are too many
calls to <code>setuid()</code> within Perl/iX, so I have not attempted an automatic
<code>GETPRIVMODE()</code> solution similar to bind().
<p></p></ul>
<p>
</p>
<hr />
<h1><a name="known_perl_ix_bugs_under_investigation">Known Perl/iX Bugs Under Investigation</a></h1>
<p>None.</p>
<p>
</p>
<hr />
<h1><a name="perl_ix_todo_list">Perl/iX To-Do List</a></h1>
<ul>
<li></li>
Make <code>setuid()/setgid()</code> support work.
<p></p>
<li></li>
Make sure that <code>fcntl()</code> against a socket descriptor is redirected to sfcntl().
<p></p>
<li></li>
Add support for Berkeley DB once I've finished porting Berkeley DB.
<p></p>
<li></li>
Write an MPE XS extension library containing miscellaneous important
MPE functions like GETPRIVMODE(), GETUSERMODE(), and sfcntl().
<p></p></ul>
<p>
</p>
<hr />
<h1><a name="perl_ix_change_history">Perl/iX Change History</a></h1>
<p>May 6, 1999</p>
<ul>
<li></li>
Patch LBCJXT6A is required on MPE/iX 5.5 machines in order to prevent
Perl/iX from dying with an unresolved external reference to _getenv_libc.
<p></p></ul>
<p>April 7, 1999</p>
<ul>
<li></li>
Updated to version 5.005_03.
<p></p>
<li></li>
The official source distribution once again compiles ``straight out
of the box'' for MPE.
<p></p>
<li></li>
The current incarnation of the 5.5 POSIX filename extended
characters patch is now MPEKX40B.
<p></p>
<li></li>
The LIBSHP3K *.a -&gt; *.sl library conversion script is now included
as /PERL/PUB/LIBSHP3K.
<p></p></ul>
<p>November 20, 1998</p>
<ul>
<li></li>
Updated to version 5.005_02.
<p></p>
<li></li>
Fixed a DynaLoader bug that was unable to load symbols from relative
path name libraries.
<p></p>
<li></li>
Fixed a .xs compilation bug where the mpeixish.sh include file wasn't
being installed into the proper directory.
<p></p>
<li></li>
All bugfixes will be submitted back to the official Perl developers.
<p></p>
<li></li>
The current incarnation of the POSIX filename extended characters
patch is now MPEKXJ3A.
<p></p></ul>
<p>August 14, 1998</p>
<ul>
<li></li>
The previous POSIX filename extended characters patch MPEKX44C has
been superseded by MPEKXB5A.
<p></p></ul>
<p>August 7, 1998</p>
<ul>
<li></li>
The previous POSIX filename extended characters patch MPEKX76A has
been superseded by MPEKX44C.
<p></p></ul>
<p>July 28, 1998</p>
<ul>
<li></li>
Updated to version 5.005_01.
<p></p></ul>
<p>July 23, 1998</p>
<ul>
<li></li>
Updated to version 5.005 (production release).  The public
freeware sources are now 100% MPE-ready ``straight out of the box''.
<p></p></ul>
<p>July 17, 1998</p>
<ul>
<li></li>
Updated to version 5.005b1 (public beta release).  The public
freeware sources are now 99.9% MPE-ready.  By installing and
testing this beta on your own HP3000, you will be helping to
insure that the final release of 5.005 will be 100% MPE-ready and
100% bug free.
<p></p>
<li></li>
My MPE binary release is now extracted using my standard INSTALL script.
<p></p></ul>
<p>July 15, 1998</p>
<ul>
<li></li>
Changed startperl to #!/PERL/PUB/perl so that Perl will recognize
scripts more easily and efficiently.
<p></p></ul>
<p>July 8, 1998</p>
<ul>
<li></li>
Updated to version 5.004_70 (internal developer release) which is now
MPE-ready.  The next public freeware release of Perl should compile
``straight out of the box'' on MPE.  Note that this version of Perl/iX
was strictly internal to me and never publicly released.  Note that
[21]BIND/iX is now required (well, the include files and libbind.a) if
you wish to compile Perl/iX.
<p></p></ul>
<p>November 6, 1997</p>
<ul>
<li></li>
Updated to version 5.004_04.  No changes in MPE-specific functionality.
<p></p></ul>
<p>October 16, 1997</p>
<ul>
<li></li>
Added Demos section to the Perl/iX home page so you can see some
sample Perl applications running on my 3000.
<p></p></ul>
<p>October 3, 1997</p>
<ul>
<li></li>
Added System Requirements section to the Perl/iX home page just so the
prerequisites stand out more. Various other home page tweaks.
<p></p></ul>
<p>October 2, 1997</p>
<ul>
<li></li>
Initial public release.
<p></p></ul>
<p>September 1997</p>
<ul>
<li></li>
Porting begins.
<p></p></ul>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>Mark Bixby, <a href="http://www.bixby.org/mark/">http://www.bixby.org/mark/</a></p>
<table border="0" width="100%" cellspacing="0" cellpadding="3">
<tr><td class="block" style="background-color: #cccccc" valign="middle">
<big><strong><span class="block">&nbsp;README.mpeix - Perl/iX for HP e3000 MPE</span></strong></big>
</td></tr>
</table>

</body>

</html>
